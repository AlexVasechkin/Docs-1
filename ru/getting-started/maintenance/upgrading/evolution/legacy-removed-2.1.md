---
title: "Наследие удалено в 2.1"
translation: "getting-started/maintenance/upgrading/evolution/legacy-removed-2.1"
---

## Функциональность

### Тип ввода TV

Были удалены следующие типы ввода:

- htmlarea, dropdown (используйте listbox), textareamini

## Методы, константы и переменные

Многие константы, переменные и методы API давно устарели, помечены для удаления в 2.0 или 2.1 и теперь окончательно удалены из базы кода MODX Revolution 2.1.

| Удалено                       | Примечания о замене или возможном обходном пути                                |
| ----------------------------- | ------------------------------------------------------------------------------ |
| IN\_PARSER\_MODE              | проверка контекста не mgr                                                      |
| IN\_MANAGER\_MODE             | проверка контекста mgr                                                         |
| `$_SESSION["mgrValidated"]`   | `modX->user->isAuthenticated('mgr')`                                           |
| `_SESSION["webValidated"]`    | `modX->user->isAuthenticated('web')`                                           |
| `$_SESSION["mgrInternalKey"]` | `modX->user->get('id')` изменено на `modX->user->isAuthenticated('mgr')`       |
| `$_SESSION["webInternalKey"]` | `modX->user->get('id')` изменено на `modX->user->isAuthenticated('web')`       |
| `$_SESSION["mgrShortname"]`   | `modX->user->get('username')` изменено на `modX->user->isAuthenticated('mgr')` |
| `$_SESSION["webShortname"]`   | `modX->user->get('username')` изменено на `modX->user->isAuthenticated('web')` |

DBAPI: `modX->db`

| Удалено                                                                                          | Примечания о замене или возможном обходном пути                                                                                                                                                                                                                                                                                                                                                                   |
| ------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| modX->db->config                                                                                 | [modX->getOption()](extending-modx/xpdo/class-reference/xpdoobject/configuration-accessors/getoption "getOption")                                                                                                                                                                                                                                                                                                 |
| modX->db->connect()                                                                              | modX автоматически подключается к базе данных MODX. Если вы хотите установить другое соединение, вы можете снова использовать xPDO                                                                                                                                                                                                                                                                                |
| modX->db->disconnect()                                                                           |
| modX->db->escape($s)                                                                             | modX->quote()                                                                                                                                                                                                                                                                                                                                                                                                     |
| modX->db->query($sql)                                                                            | modX->query() or modX->execute($criteria) см. руководство по запросам PDO                                                                                                                                                                                                                                                                                                                                         |
| modX->db->delete($from, $where= "",$fields='')                                                   | see modX->query()                                                                                                                                                                                                                                                                                                                                                                                                 |
| modX->db->select($fields= "\*", $from= "", $where= "", $orderby= "", $limit= "")                 | see modX->query()                                                                                                                                                                                                                                                                                                                                                                                                 |
| modX->db->update($fields, $table, $where= "")                                                    | see modX->query()                                                                                                                                                                                                                                                                                                                                                                                                 |
| modX->db->insert($fields, $intotable, $fromfields= "\*", $fromtable= "", $where= "", $limit= "") | see modX->query()                                                                                                                                                                                                                                                                                                                                                                                                 |
| modX->db->exec($sql)                                                                             | see modX->execute($criteria)                                                                                                                                                                                                                                                                                                                                                                                      |
| modX->db->getInsertId()                                                                          | see modX->lastInsertId()                                                                                                                                                                                                                                                                                                                                                                                          |
| modX->db->getAffectedRows()                                                                      | see modX->getCount() or xPDOCriteria->stmt->rowCount()                                                                                                                                                                                                                                                                                                                                                            |
| modX->db->getLastError()                                                                         | see xPDOCriteria->stmt->errorCode or xPDOCriteria->stmt->errorInfo                                                                                                                                                                                                                                                                                                                                                |
| modX->db->getRecordCount($ds)                                                                    | modX->getCount($className, $criteria= null)                                                                                                                                                                                                                                                                                                                                                                       |
| modX->db->getRow($ds, $mode= 'assoc')                                                            | see xPDOCriteria->stmt->fetch()                                                                                                                                                                                                                                                                                                                                                                                   |
| modX->db->getColumn($name, $dsq)                                                                 | see xPDOCriteria->stmt->fetchColumn()                                                                                                                                                                                                                                                                                                                                                                             |
| modX->db->getColumnNames($dsq)                                                                   | see modX->getFields($className) (примечание: не совсем то же самое .. дает вам имена столбцов для определенного класса)                                                                                                                                                                                                                                                                                           |
| modX->db->getValue($dsq)                                                                         | see xPDOCriteria->stmt->fetchColumn()                                                                                                                                                                                                                                                                                                                                                                             |
| modX->db->getXML($dsq)                                                                           | нет прямого аналога                                                                                                                                                                                                                                                                                                                                                                                               |
| modX->db->getTableMetaData($table)                                                               | modX->map property                                                                                                                                                                                                                                                                                                                                                                                                |
| modX->db->prepareDate($timestamp, $fieldType= 'DATETIME')                                        | Преобразование типов данных из php в sql выполняется автоматически в модели modX (или в пользовательской модели xPDO)                                                                                                                                                                                                                                                                                             |
| modX->db->getHTMLGrid($dsq, $params)                                                             | нет прямого аналога                                                                                                                                                                                                                                                                                                                                                                                               |
| modX->db->makeArray($rs= '')                                                                     | see xPDOCriteria->stmt->fetch()                                                                                                                                                                                                                                                                                                                                                                                   |
| modX->getFullTableName()                                                                         | modX->getTableName($className, $includeDb=false)                                                                                                                                                                                                                                                                                                                                                                  |
| or modX->escape($customTableName)                                                                |
| modX->dbConfig                                                                                   | modX->getOption() (ПРИМЕЧАНИЕ: некоторые из ключей конфигурации отличаются, например dbuser = username, dbpass = password, dbase = dbname)                                                                                                                                                                                                                                                                        |
|                                                                                                  |
| modX->putChunk()                                                                                 | modX->getChunk()                                                                                                                                                                                                                                                                                                                                                                                                  |
| modX->isFrontend()                                                                               | modX->context->get('key') == 'web' или другой внешний интерфейс                                                                                                                                                                                                                                                                                                                                                   |
| modX->isBackend()                                                                                | modX->context->get('key') == 'mgr'                                                                                                                                                                                                                                                                                                                                                                                |
| modX->getSettings()                                                                              | modX->config after $modx->getConfig()                                                                                                                                                                                                                                                                                                                                                                             |
| modX->getDocumentObject($method, $identifier)                                                    | not public API method; no replacement (см modRequest->getResource())                                                                                                                                                                                                                                                                                                                                              |
| modX->isMemberOfWebGroup()                                                                       | modX->user->isMember or modUser->isMember                                                                                                                                                                                                                                                                                                                                                                         |
| modX->getDocument                                                                                | modX->getObject('modResource', $criteria)                                                                                                                                                                                                                                                                                                                                                                         |
| modX->getDocuments                                                                               | modX->getCollection('modResource', $criteria)                                                                                                                                                                                                                                                                                                                                                                     |
| or modX->getIterator('modResource', $criteria)                                                   |
| modX->getAllChildren()                                                                           | modX->getCollection('modResource', $criteria) , $criteria в состоянии где 'parent' = $id                                                                                                                                                                                                                                                                                                                          |
| modX->getActiveChildren()                                                                        | modX->getCollection('modResource', $criteria) , $criteria имея где условия 'parent' = $id, 'published' = 1, 'deleted' = 0                                                                                                                                                                                                                                                                                         |
| modX->getDocumentChildren()                                                                      | as above, modX->getCollection('modResource', $criteria) with specific criteria                                                                                                                                                                                                                                                                                                                                    |
| modX->getDocumentChildrenTVars()                                                                 | чтобы документировать дочерние ресурсы и их TV одновременно: `modResource->getMany('Children')` и итерировать детей, и вы можете `modResource->getTVValue()`, или получить TV любого объекта modResource: `modResource->getTemplateVars()`, или получите modTemplateVar с `modX->getObject('modTemplateVar', array('name' => $tvName))` а потом `modTemplateVar->getValue($resourceId)/renderOutput($resourceId)` |
| modX->getTemplateVar()                                                                           | modX->getObject('modTemplateVar', $criteria)                                                                                                                                                                                                                                                                                                                                                                      |
| modX->getTemplateVars()                                                                          | modX->getCollection('modTemplateVar', $criteria)                                                                                                                                                                                                                                                                                                                                                                  |
| modX->getTemplateVarOutput()                                                                     | use modTemplateVar->renderOutput() на коллекции объектов modTemplateVar                                                                                                                                                                                                                                                                                                                                           |
| modX->getParent()                                                                                | modX->getObject('modResource', $modx->resource->get('parent')) или при необходимости укажите дополнительные критерии                                                                                                                                                                                                                                                                                              |
| modX->getPageInfo()                                                                              | modX->getObject('modResource', $criteria)                                                                                                                                                                                                                                                                                                                                                                         |
| modX->getUserInfo()                                                                              | $user= $this->getObjectGraph('modUser', '{"Profile":{}}', $uid, true)                                                                                                                                                                                                                                                                                                                                             |
| access fields of modUser and fields of related modUserProfile                                    |
| modX->getWebUserInfo()                                                                           | как указано выше                                                                                                                                                                                                                                                                                                                                                                                                  |
| modX->changeWebUserPassword()                                                                    | modUser->changePassword()                                                                                                                                                                                                                                                                                                                                                                                         |
| modX->changePassword()                                                                           | modUser->changePassword()                                                                                                                                                                                                                                                                                                                                                                                         |
| modX->cleanDocumentIdentifier()                                                                  | modRequest->\_cleanResourceIdentifier(), но не является публичным методом API (НЕ ИСПОЛЬЗУЙТЕ)                                                                                                                                                                                                                                                                                                                    |
| modX->getDocumentIdentifier()                                                                    | modRequest->getResourceIdentifier()                                                                                                                                                                                                                                                                                                                                                                               |
| modX->getDocumentMethod()                                                                        | modRequest->getResourceMethod()                                                                                                                                                                                                                                                                                                                                                                                   |
| modX->checkPreview()                                                                             | больше не действует, удаление для 2.1.0-rc1                                                                                                                                                                                                                                                                                                                                                                       |
| modX->getManagerPath()                                                                           | Use modX->getOption('manager\_url', null, MODX\_MANAGER\_URL)                                                                                                                                                                                                                                                                                                                                                     |
| modX->mergeDocumentContent()                                                                     | see modParser->processElementTags()                                                                                                                                                                                                                                                                                                                                                                               |
| modX->mergeSettingsContent()                                                                     | see modParser->processElementTags()                                                                                                                                                                                                                                                                                                                                                                               |
| modX->mergeChunkContent()                                                                        | see modParser->processElementTags()                                                                                                                                                                                                                                                                                                                                                                               |
| modX->mergePlaceholderContent()                                                                  | see modParser->processElementTags()                                                                                                                                                                                                                                                                                                                                                                               |
| modX->documentObject                                                                             | access via modX->resource->get($field) or modX->resource->$field непосредственно для необработанных данных                                                                                                                                                                                                                                                                                                        |
| modX->documentIdentifier                                                                         | modX->resourceIdentifier                                                                                                                                                                                                                                                                                                                                                                                          |
| modX->documentMethod                                                                             | modX->resourceMethod                                                                                                                                                                                                                                                                                                                                                                                              |
| modX->documentContent                                                                            | modX->resource->getContent()                                                                                                                                                                                                                                                                                                                                                                                      |
| modX->documentGenerated                                                                          | modX->resourceGenerated                                                                                                                                                                                                                                                                                                                                                                                           |
| modX->dumpSQL                                                                                    | see xPDOQuery->toSQL() (после xPDOQuery->prepare())                                                                                                                                                                                                                                                                                                                                                               |
| modKeyword классы и связанный код                                                                | ушел из фреймворка, чтобы быть реализованным более эффективно, как считает разработчик                                                                                                                                                                                                                                                                                                                            |
| modMetatag классы и связанный код                                                                | ушел из фреймворка, чтобы быть реализованным более эффективно, как считает разработчик                                                                                                                                                                                                                                                                                                                            |
| modElement->toPlaceholders()                                                                     | modX->toPlaceholders()                                                                                                                                                                                                                                                                                                                                                                                            |
| modManagerUser и связанные классы и код                                                          | см modUser                                                                                                                                                                                                                                                                                                                                                                                                        |
| modUserRole и связанные классы и код                                                             | см Revo abac разрешения                                                                                                                                                                                                                                                                                                                                                                                           |
| modWebUser и связанные классы и код                                                              | см modUser                                                                                                                                                                                                                                                                                                                                                                                                        |
| modEventLog class и modX->logEvent()                                                             | см modX->log()                                                                                                                                                                                                                                                                                                                                                                                                    |
| modLexiconFocus/Topic/Language и связанные классы и код                                          | см modLexicon и modLexiconEntry                                                                                                                                                                                                                                                                                                                                                                                   |
| modX->executeProcessor()                                                                         | см modX->runProcessor()                                                                                                                                                                                                                                                                                                                                                                                           |
| modTemplate->getTVs()                                                                            | modTemplate->getTemplateVars()                                                                                                                                                                                                                                                                                                                                                                                    |
